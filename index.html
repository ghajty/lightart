<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>貓貓燈具 - 科技感電商</title>
<style>
/* ===== 全局 ===== */
body {
  margin:0;
  font-family: 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(135deg, #0d0d0d, #1a1a1a);
  color:#eee;
  overflow-x:hidden;
}
a{color:#0ff; text-decoration:none;}
button{cursor:pointer; transition:0.2s;}

/* ===== 頭部 ===== */
header{
  background: rgba(20,20,30,0.85);
  backdrop-filter: blur(10px);
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.5);
  position:fixed; top:0; left:0; width:100%; z-index:100;
}
header img{width:50px;height:50px;border-radius:50%; border:1px solid #0ff;}
header h1{margin:0 20px; font-size:1.8em; color:#0ff;}
header nav button{
  padding:8px 12px; border:none; border-radius:5px;
  background: linear-gradient(135deg,#00f,#0ff);
  color:#000; font-weight:bold;
  box-shadow:0 0 10px #0ff;
}
header nav button:hover{box-shadow:0 0 20px #0ff; transform:scale(1.05);}

/* ===== 按鈕 ===== */
.neon-btn{
  background: linear-gradient(135deg,#0ff,#00f);
  border:none; border-radius:5px;
  color:#000; font-weight:bold;
  padding:8px 12px;
  box-shadow: 0 0 10px #0ff;
}
.neon-btn:hover{box-shadow:0 0 20px #0ff; transform:scale(1.05);}

/* ===== 主容器 ===== */
.container{max-width:1000px; margin:100px auto 40px; padding:0 20px;}

/* ===== 商品列表 ===== */
.products{
  display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px;
}
.product-card{
  background: rgba(30,30,50,0.85);
  backdrop-filter: blur(10px);
  border-radius:10px; padding:15px; text-align:center;
  box-shadow:0 2px 10px rgba(0,255,255,0.2);
  transition:0.3s;
}
.product-card:hover{transform:translateY(-5px) scale(1.02); box-shadow:0 4px 20px rgba(0,255,255,0.4);}
.product-card img{width:100%; height:180px; object-fit:cover; border-radius:8px;}
.product-card h3{margin:10px 0 5px;}
.product-card p{margin:0 0 10px;}
.product-card button{padding:5px 10px; margin:2px; background:#0ff; border:none; border-radius:5px; color:#000; font-weight:bold; box-shadow:0 0 5px #0ff;}
.product-card button:hover{box-shadow:0 0 15px #0ff; transform:scale(1.05);}

/* ===== 側邊欄 ===== */
.side-panel{
  position:fixed; top:0; width:320px; height:100%;
  background: rgba(20,20,30,0.95); backdrop-filter: blur(10px);
  box-shadow: 0 0 15px rgba(0,255,255,0.3); padding:20px; overflow-y:auto;
  transition: all 0.3s ease;
  z-index:1000;
}
#aboutSide{left:-320px;}
#cartSide{right:-320px;}
#historySide{right:-320px;}
.side-panel.show#aboutSide{left:0;}
.side-panel.show#cartSide{right:0;}
.side-panel.show#historySide{right:0;}
.overlay{
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.5); z-index:900;
}
.overlay.show{display:block;}

/* ===== 購物車 ===== */
#cartSide ul, #historySide ul{list-style:none; padding:0;}
#cartSide li, #historySide li{margin-bottom:10px; padding:5px; background: rgba(0,255,255,0.05); border-radius:5px; display:flex; justify-content:space-between; align-items:center;}
#cartSide li button,#historySide li button{padding:3px 6px; background:#0ff; color:#000; border:none; border-radius:5px; box-shadow:0 0 5px #0ff;}
#cartSide li button:hover,#historySide li button:hover{box-shadow:0 0 15px #0ff;}

/* ===== 彈窗 ===== */
#orderModal{
  display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(0.7);
  background: rgba(30,30,50,0.95); padding:20px; border-radius:10px;
  box-shadow:0 0 20px #0ff; color:#eee; max-height:80%; overflow-y:auto; z-index:1001;
  transition: all 0.3s ease, opacity 0.3s ease;
  opacity:0;
}
#orderModal.show{display:block; transform:translate(-50%,-50%) scale(1); opacity:1;}

/* ===== 表單 ===== */
form{
  background: rgba(30,30,50,0.85); backdrop-filter:blur(10px); padding:15px;
  border-radius:10px; margin-bottom:20px;
}
form input, form select{width:100%; padding:8px; margin:5px 0 10px; border-radius:5px; border:1px solid #0ff; background: rgba(0,0,0,0.3); color:#eee;}
form button{width:100%; padding:10px; background:#0ff; border:none; border-radius:5px; font-weight:bold; box-shadow:0 0 10px #0ff; color:#000;}
form button:hover{box-shadow:0 0 20px #0ff; transform:scale(1.05);}

/* ===== 分類折疊 ===== */
#categoryToggle{
  cursor:pointer; background:#0ff; color:#000; padding:8px; border-radius:5px; width:140px; text-align:center; margin:10px 0;
  box-shadow:0 0 10px #0ff;
}
#categoryToggle:hover{box-shadow:0 0 20px #0ff; transform:scale(1.05);}
#categoryList{display:none; margin-bottom:10px; display:flex; flex-wrap:wrap; gap:5px;}
#categoryList button{padding:5px 10px; background:linear-gradient(135deg,#00f,#0ff); border:none; color:#000; border-radius:5px; font-weight:bold; box-shadow:0 0 5px #0ff;}
#categoryList button.active{box-shadow:0 0 15px #0ff;}
#categoryList button:hover{box-shadow:0 0 20px #0ff; transform:scale(1.05);}
</style>
</head>
<body>

<header>
<img src="https://placekitten.com/50/50" alt="公司頭貼">
<h1>貓貓燈具</h1>
<nav>
<button id="openAboutBtn" class="neon-btn">公司簡介</button>
<button id="openCartBtn" class="neon-btn">購物車</button>
<button id="openHistoryBtn" class="neon-btn">交易歷史</button>
</nav>
</header>

<div class="container">
<div id="memberArea">
<span id="welcomeMsg"></span>
<button id="logoutBtn" style="display:none;">登出</button>
</div>

<div id="categoryToggle">顯示分類 ▼</div>
<div id="categoryList"></div>

<div class="products" id="productList"></div>

<!-- 會員表單 -->
<form id="memberForm">
<h2>會員系統</h2>
<input type="text" id="memberUsername" placeholder="帳號" required>
<input type="password" id="memberPassword" placeholder="密碼" required>
<input type="email" id="memberEmail" placeholder="Email (註冊用)">
<button type="submit" id="memberBtn">註冊 / 登入</button>
</form>

<!-- 下單表單 -->
<form id="checkoutForm">
<h2>顧客資料</h2>
<input type="text" id="name" placeholder="姓名" required>
<input type="tel" id="phone" placeholder="電話" required>
<input type="email" id="email" placeholder="Email" required>
<input type="text" id="address" placeholder="收貨地址" required>
<select id="payment" required>
<option value="">付款方式</option>
<option value="貨到付款">貨到付款</option>
<option value="線上付款">線上付款</option>
</select>
<button type="submit">下單</button>
</form>

<!-- 後台管理 -->
<form id="adminForm">
<h2>後台管理 - 商品新增/修改</h2>
<input type="text" id="adminName" placeholder="商品名稱" required>
<input type="text" id="adminCategory" placeholder="分類" required>
<input type="number" id="adminPrice" placeholder="價格" required>
<input type="text" id="adminImg" placeholder="圖片URL" required>
<input type="text" id="adminDesc" placeholder="商品描述" required>
<button type="submit">新增 / 更新商品</button>
</form>
</div>

<!-- 側邊欄 -->
<div id="aboutSide" class="side-panel">
<h2>公司簡介</h2>
<p>貓貓燈具專注於提供創意又高品質的室內照明產品，從吊燈到燈條，讓每個空間都溫暖舒適，營造獨特氛圍。</p>
<button id="closeAboutBtn">關閉</button>
</div>

<div id="cartSide" class="side-panel">
<h2>購物車</h2>
<ul id="cartItems"></ul>
<p>總計：$<span id="cartTotal">0</span></p>
</div>

<div id="historySide" class="side-panel">
<h2>歷史訂單</h2>
<ul id="historyListSide"></ul>
<button id="closeHistoryBtn">關閉</button>
</div>

<!-- 彈窗明細 -->
<div id="orderModal"></div>
<div id="aboutOverlay" class="overlay"></div>
<div id="cartOverlay" class="overlay"></div>
<div id="historyOverlay" class="overlay"></div>
<div id="modalOverlay" class="overlay"></div>

<script>
// ===== 資料 =====
let products=[
{id:1,name:"現代吊燈A",category:"吊燈",price:2500,img:"https://placekitten.com/300/180",desc:"適合客廳使用"},
{id:2,name:"復古壁燈B",category:"壁燈",price:1200,img:"https://placekitten.com/301/180",desc:"適合走廊或臥室"},
{id:3,name:"吸頂燈C",category:"吸頂燈",price:1800,img:"https://placekitten.com/302/180",desc:"節能又明亮"},
{id:4,name:"投射燈D",category:"投射燈",price:900,img:"https://placekitten.com/303/180",desc:"可調整方向"},
{id:5,name:"燈條E",category:"燈條",price:600,img:"https://placekitten.com/304/180",desc:"裝飾性強"},
{id:6,name:"軌道燈F",category:"軌道燈",price:1500,img:"https://placekitten.com/305/180",desc:"適合展示空間"}];
const categories=["全部商品","吊燈","壁燈","吸頂燈","投射燈","燈條","軌道燈"];
let cart=[], currentMember=null;

// ===== 會員系統 =====
function updateMemberUI(){
  const welcome=document.getElementById("welcomeMsg");
  const logoutBtn=document.getElementById("logoutBtn");
  const memberForm=document.getElementById("memberForm");
  if(currentMember){
    welcome.textContent=`歡迎，${currentMember.username}`;
    logoutBtn.style.display="inline-block";
    memberForm.style.display="none";
    cart=currentMember.cart||[];
    renderCart(); renderHistorySide();
  } else {
    welcome.textContent=""; logoutBtn.style.display="none"; memberForm.style.display="block";
    cart=[]; renderCart(); renderHistorySide();
  }
}
document.getElementById("logoutBtn").addEventListener("click",()=>{if(confirm("確定要登出嗎？")){currentMember=null;updateMemberUI();}});

document.getElementById("memberForm").addEventListener("submit",e=>{
  e.preventDefault();
  const u=document.getElementById("memberUsername").value;
  const p=document.getElementById("memberPassword").value;
  const em=document.getElementById("memberEmail").value;
  let members=JSON.parse(localStorage.getItem("members"))||[];
  let member=members.find(m=>m.username===u);
  if(member){ if(member.password===p){alert("登入成功"); currentMember=member;} else {alert("密碼錯誤"); return;} }
  else{member={username:u,password:p,email:em,cart:[],orders:[]}; members.push(member); localStorage.setItem("members",JSON.stringify(members)); alert("註冊成功並登入"); currentMember=member;}
  updateMemberUI();
});

// ===== 折疊分類 =====
const categoryToggle=document.getElementById("categoryToggle");
const categoryList=document.getElementById("categoryList");
categoryToggle.addEventListener("click",()=>{
  if(categoryList.style.display==="none"||categoryList.style.display===""){
    categoryList.style.display="flex"; categoryToggle.textContent="隱藏分類 ▲";
  } else {categoryList.style.display="none"; categoryToggle.textContent="顯示分類 ▼";}
});
categories.forEach(cat=>{
  const btn=document.createElement("button"); btn.textContent=cat;
  btn.onclick=()=>{displayProducts(cat); categoryList.querySelectorAll('button').forEach(b=>b.classList.remove('active')); btn.classList.add('active');};
  if(cat==="全部商品") btn.classList.add("active");
  categoryList.appendChild(btn);
});

// ===== 顯示商品 =====
function displayProducts(filter="全部商品"){
  const list=document.getElementById("productList"); list.innerHTML="";
  let filtered=filter==="全部商品"?products:products.filter(p=>p.category===filter);
  filtered.forEach(p=>{
    const div=document.createElement("div"); div.className="product-card";
    div.innerHTML=`<img src="${p.img}" alt="${p.name}"><h3>${p.name}</h3><p>${p.desc}</p><p>價格: $${p.price}</p>
    <button onclick="addToCart(${p.id},1)">加入購物車</button>`;
    list.appendChild(div);
  });
}
displayProducts();

// ===== 購物車功能 =====
function addToCart(id,qty=1){
  const product=products.find(p=>p.id===id);
  const existing=cart.find(item=>item.id===id);
  if(existing) existing.qty+=qty; else cart.push({...product,qty:qty});
  saveCart(); renderCart();
}
function renderCart(){
  const ul=document.getElementById("cartItems"); ul.innerHTML=""; let total=0;
  cart.forEach((item,index)=>{
    const li=document.createElement("li");
    li.innerHTML=`${item.name} x ${item.qty} - $${item.price*item.qty}`;
    const removeBtn=document.createElement("button"); removeBtn.textContent="移除"; removeBtn.onclick=()=>{cart.splice(index,1); saveCart(); renderCart();};
    li.appendChild(removeBtn); ul.appendChild(li);
    total+=item.price*item.qty;
  });
  document.getElementById("cartTotal").innerText=total;
}
function saveCart(){if(currentMember){currentMember.cart=cart; updateMemberStorage();} else {localStorage.setItem("cart",JSON.stringify(cart));}}
function updateMemberStorage(){let members=JSON.parse(localStorage.getItem("members"))||[]; const idx=members.findIndex(m=>m.username===currentMember.username); if(idx>=0){members[idx]=currentMember; localStorage.setItem("members",JSON.stringify(members));}}

// ===== 下單 =====
document.getElementById("checkoutForm").addEventListener("submit",e=>{
  e.preventDefault();
  if(cart.length===0){alert("請先加入商品"); return;}
  const order={id:Date.now(),name:document.getElementById("name").value,phone:document.getElementById("phone").value,email:document.getElementById("email").value,address:document.getElementById("address").value,payment:document.getElementById("payment").value,items:cart};
  if(currentMember){currentMember.orders.push(order); currentMember.cart=[]; cart=[]; updateMemberStorage();}
  simulateEmail(order); renderCart(); renderHistorySide();
  document.getElementById("checkoutForm").reset();
});
function simulateEmail(order){alert(`訂單 #${order.id} 已成立，Email 已發送至 ${order.email}`);}

// ===== 側邊欄控制 =====
const openAboutBtn=document.getElementById("openAboutBtn");
const aboutSide=document.getElementById("aboutSide");
const closeAboutBtn=document.getElementById("closeAboutBtn");
const aboutOverlay=document.getElementById

